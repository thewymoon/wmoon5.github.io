<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-05-12T21:55:47-05:00</updated><id>http://localhost:4000/</id><title type="html">W.M.Moon</title><subtitle>Some of my thoughts.</subtitle><author><name>wmmoon</name></author><entry><title type="html">Do rebounds really win games?</title><link href="http://localhost:4000/2017/02/12/rebounding.html" rel="alternate" type="text/html" title="Do rebounds really win games?" /><published>2017-02-12T00:00:00-06:00</published><updated>2017-02-12T00:00:00-06:00</updated><id>http://localhost:4000/2017/02/12/rebounding</id><content type="html" xml:base="http://localhost:4000/2017/02/12/rebounding.html">&lt;p&gt;If you’re a basktball fan you might have heard this popular saying: “Rebounds win games!”&lt;/p&gt;

&lt;p&gt;For those non-basketball junkies out there, a rebound is when a player retrieves the ball after someone has just missed a shot. An “offensive rebound” is when your team is on offense and someone on your own team has just missed a shot and a “defensive rebound” is when your team is on defense and someone on the other team has just missed a shot.&lt;/p&gt;

&lt;p&gt;The saying mentioned above about rebounds winning games seems to almost imply that a team should simply focus on getting as many rebounds as possible in order to win games. 
And obviously no coach will be extreme enough to say that that is all a team needs to do to win, but the general idea is still there: Focus on winning the rebound game and your chances are good.&lt;/p&gt;

&lt;p&gt;Today I look to explore this question of rebounds in basketball using game log data from the NBA 2015-2016 regular season that I have scraped from &lt;a href=&quot;//stats.nba.com&quot;&gt;stats.nba.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Before we go further, let me explain my theory. There’s no doubt that getting rebounds will positively impact your chances of winning a basketball game, but I believe that the main reason why rebounds are often correlated with winning basketball games is because you simply tend to get more rebounds when the opposing team is missing a lot of their shots. And conversely, the opposing team will not get very many rebounds when your team is making most of your shots. 
In other words, maybe the real explanation is that the team that happens to be shooting more accurately tends to also get more rebounds because there are just more opportunities to grab defensive rebounds. And via this explanation, rebounding is simply correlated and not causal to winning games. The real underlying cause is better shooting.&lt;/p&gt;

&lt;p&gt;First, let’s take a look at a heatmap of the correlations between various stats.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/rebounding/correlation_heatmap.png?raw=true&quot; alt=&quot;heatmap&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There’s too much information on this plot to really go into, but I encourage you to take a look at the various statistics that are strongly correlated with each other and convince yourself why they make sense. Here is a &lt;a href=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/rebounding/correlation_heatmap.png?raw=true&quot;&gt;link&lt;/a&gt; to the image to see it full size.&lt;/p&gt;

&lt;p&gt;Specifically, I would like to look at which stats are most strongly correlated to the “Plus/Minus” stat, which is just the point differential between the two teams (a positive value indicating that your team won).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/rebounding/PlusMinus_correlations.png?raw=true&quot; alt=&quot;correlations&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here we can see that the statistic most highly correlated with Plus/Minus is the difference in field goal percentage differential (FGPCT_DIFF). In other words, the extent to which a team is shooting more accurately than the opposing team is most highly correlated with the final score difference. However, we can also see that the difference in rebounds (REB_DIFF) between the two teams is also correlated to a relatively high degree.&lt;/p&gt;

&lt;p&gt;In order to answer my question about rebounding, shooting accuracy, and winning, I calculate the &lt;a href=&quot;https://en.wikipedia.org/wiki/Partial_correlation&quot;&gt;partial correlation&lt;/a&gt; between Plus/Minus and other statistics with the effect of FGPCT_DIFF removed. If the correlation between Plus/Minus and REB_DIFF is really driven solely by FGPCT_DIFF, we would expect the partial correlation decrease close to zero.&lt;/p&gt;

&lt;p&gt;And here are the partial correlation results:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/rebounding/PlusMinus_PartialCorrelations.png?raw=true&quot; alt=&quot;partial correlations&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As we can see, Plus/Minus and REB_DIFF are still correlated fairly strongly even having filtered out the linear effect from FGPCT_DIFF. Contrastingly, the FG_PCT stat, which was the third most correlated to Plus/Minus earlier now has a partial correlation of close to zero with Plus/Minus. This shows that, once you remove the effect of FGPCT_DIFF, there is not much correlation between FG_PCT and Plus/Minus that remains.&lt;/p&gt;

&lt;p&gt;So, what does this all mean? It means that my theory doesn’t seem to be correct. Although the correlation between Plus/Minus and REB_DIFF did decrease after removing the effect of FGPCT_DIFF, there still remained an appreciably correlation afterwards. In other words, it does seem like winning the rebounding battle is indeed one of the most important factors in winning a basketball game and it isn’t simply a result of shooting better than the other team.&lt;/p&gt;

&lt;p&gt;Therefore, to all you basketball players out there, get after those boards! Here’s one of my &lt;a href=&quot;http://i.imgur.com/Sq6esXu.jpg&quot;&gt;favorite pictures&lt;/a&gt; for inspiration.&lt;/p&gt;</content><author><name>wmmoon</name></author><summary type="html">If you’re a basktball fan you might have heard this popular saying: “Rebounds win games!”</summary></entry><entry><title type="html">New Years and Crowded Gyms</title><link href="http://localhost:4000/2017/01/29/gymcrowd.html" rel="alternate" type="text/html" title="New Years and Crowded Gyms" /><published>2017-01-29T00:00:00-06:00</published><updated>2017-01-29T00:00:00-06:00</updated><id>http://localhost:4000/2017/01/29/gymcrowd</id><content type="html" xml:base="http://localhost:4000/2017/01/29/gymcrowd.html">&lt;p&gt;It’s the start of a new year and new semester at universities everywhere. And what does that mean? Crowded gyms.&lt;/p&gt;

&lt;p&gt;Many of us have experienced the frustration of walking into a crowded gym and all of its associated negative consequences. If you’re like me, you may end up even resorting to going to the gym close to midnight in order to avoid long waits. And though the gym does seem to be less crowded at these late hours, it comes at the cost of having a very hard time falling asleep at night. Still worth it to me.&lt;/p&gt;

&lt;p&gt;Today we’ll look to find a better way to decide when to hit the gym so that you and I can look and feel as good as possible while minimizing our crowded gym frustrations. I have taken a &lt;a href=&quot;https://www.kaggle.com/nsrose7224/crowdedness-at-the-campus-gym&quot;&gt;dataset&lt;/a&gt; from the kaggle website, in which the number of people at a university gym has been recorded at various time intervals throughout the year.&lt;/p&gt;

&lt;p&gt;First, let’s take a look at the average gym numbers throughout the day.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/gym_crowds/overall_average.png?raw=true&quot; alt=&quot;Gym crowdes throughout day&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can notice a few things:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Numbers at the gym seem to start dipping around 10 PM&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The gym is relatively empty in the mornings, but you probably want to finish your workout by 8 AM  on the weekdays and 9 AM on the weekends&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;There’s a noticeable dip around 2 PM possibly due to people finishing up and leaving after a mid-day workout during their lunch hours&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Most likely it’s these two pieces of information (the time and whether it is the weekend or weekday) that make up the vast majority of our thought process when deciding about going to the gym. So, let’s measure how accurate we can be using this method. By measuring the average number of people at the gym for each 15 minute interval of the day for both weekdays and weekends, a prediction about the gym crowd can be made given the time of day and whether it is the weekend or not.&lt;/p&gt;

&lt;p&gt;It’s very important to remember to split your data into a “training set” and “test set” when measuring the performance of a predictor, so I make sure to do that here. Otherwise it’s almost like a teacher putting the exact some questions from past homeworks on a test. The test is meant to measure how well a student knows the material, but if questions are reused from previous homeworks, then students can simply remember the answers without necessarily actually understanding the material.&lt;/p&gt;

&lt;p&gt;So how well does this method perform? We can calculate the &lt;a href=&quot;https://en.wikipedia.org/wiki/Mean_squared_error&quot;&gt;mean squared error (MSE)&lt;/a&gt; and return a value of &lt;strong&gt;12.6&lt;/strong&gt;, meaning our prediction using this method will generally be wrong by about 12.6 people (on average).&lt;/p&gt;

&lt;p&gt;This seems alright, but I hope to do better by incorporating some more information and using a machine learning algorithm called &lt;a href=&quot;https://en.wikipedia.org/wiki/Gradient_boosting&quot;&gt;Gradient Boosted&lt;/a&gt; Decision Trees (BDT). I won’t go into the details of how they work right now (that’s for another post), but we will look at some results. The features used to make the predictions are as follows:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The time of day&lt;/li&gt;
  &lt;li&gt;Day of the week&lt;/li&gt;
  &lt;li&gt;Whether it is a holiday&lt;/li&gt;
  &lt;li&gt;The temperature&lt;/li&gt;
  &lt;li&gt;Whether it is the beginning of the semester&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And how well does this method perform?? The MSE comes out to around &lt;strong&gt;7.8&lt;/strong&gt;, which is a significant improvement over our previous method.&lt;/p&gt;

&lt;p&gt;It turns out that we can actually look at how important the different features are for the BDT to make its predictions. Here we can see a plot of the different features in order of decreasing importance.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/gym_crowds/FeatureImportances.png?raw=true&quot; alt=&quot;Feature Importances&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Interestingly, the temperature is the most important feature and not the time! But just knowing that the temperature is important doesn’t really help us that much. We want to know &lt;em&gt;how&lt;/em&gt; it is affecting the gym crowd. It turns out there are cool plots called &lt;a href=&quot;http://scikit-learn.org/stable/auto_examples/ensemble/plot_partial_dependence.html&quot;&gt;partial dependence&lt;/a&gt; plots that help us interpret what the BDT is doing with the temperature information.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/gym_crowds/TempPartialDependence.png?raw=true&quot; alt=&quot;Temperature Partial Dependence&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can interpret these plots like this. The horizontal x-axis tells us the temperature and the vertical y-axis tells us the relative affect that a given temperature has on the final prediction of the BDT. For example, we can see that at a cold temperature of 50 degrees, the line is at -10 on the y-axis. This means that the BDT sees that it is cold and will generally reduce its prediction by about 10 people because of the temperature. It’s worth noting that these are all statements regarding only averages and average effects, but they nonetheless give us an idea of what the BDT is doing.&lt;/p&gt;

&lt;p&gt;And fortunately enough the temperature partial dependence plot affirms what many of us probably already know intuitively. Cold temperatures dissuade people from leaving their home and going to the gym.&lt;/p&gt;

&lt;p&gt;So, there you have it! A cute little analysis of gym crowds. To recap what we’ve learned:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Morning workouts should be done before 8 AM on weekdays and 9 AM on weekends&lt;/li&gt;
  &lt;li&gt;The gym starts clearing up around 10 PM&lt;/li&gt;
  &lt;li&gt;It’s generally less crowded overall on the weekends&lt;/li&gt;
  &lt;li&gt;The weather plays a large role and the best times to go are when it’s too cold&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Enjoy your workout!&lt;/p&gt;</content><author><name>wmmoon</name></author><summary type="html">It’s the start of a new year and new semester at universities everywhere. And what does that mean? Crowded gyms.</summary></entry><entry><title type="html">Kobe Over the Years</title><link href="http://localhost:4000/2017/01/26/Kobe.html" rel="alternate" type="text/html" title="Kobe Over the Years" /><published>2017-01-26T00:00:00-06:00</published><updated>2017-01-26T00:00:00-06:00</updated><id>http://localhost:4000/2017/01/26/Kobe</id><content type="html" xml:base="http://localhost:4000/2017/01/26/Kobe.html">&lt;p&gt;Those who know me know that I’m a huge basketball fan. And now that my playing days are over, I have transitioned from playing basketball to the even more exciting activity of analyzing basketball data.&lt;/p&gt;

&lt;p&gt;Today we’ll be looking at one of basketball’s greatest icons, Kobe Bryant. Considered one of the greatest and most popular players to every play the game, he is particularly interesting because of his ability to stay dominant well into his 30’s, which is considered old for a professional basketball player. He was able to do so, not only by working super hard and using his incredible physical gifts, but also by being extremely smart and adaptins his style of play throughout his career to adjust to the changes in the NBA, his teammates, and his own body.&lt;/p&gt;

&lt;p&gt;For the sake of this post, let’s divide Kobe’s career into five different eras. First, we call the first three years of Kobe’s career as the &lt;a href=&quot;https://i.ytimg.com/vi/eaJMLnt5bdU/maxresdefault.jpg&quot;&gt;“Young Kobe”&lt;/a&gt; era, which is followed by the &lt;a href=&quot;https://static1.squarespace.com/static/564173e3e4b047c0f3f64775/t/570e96fd27d4bd2e542dfb32/1460573954240/&quot;&gt;“Frobe”&lt;/a&gt; era, during which Kobe rocked his famous afro. After that we have &lt;a href=&quot;http://s3.amazonaws.com/tpt-uploads-production/uploads/56704175-copy-3-e1453399062311.jpg&quot;&gt;“Solo Kobe”&lt;/a&gt; during which he had his historical 81 point game (in which Kwame Brown played &lt;a href=&quot;https://pbs.twimg.com/media/Cf-ATfBWIAAOkQ5.jpg&quot;&gt;32 minutes&lt;/a&gt;). Then we have &lt;a href=&quot;http://www.rantsports.com/nba/files/2015/03/Kobe-Bryant.jpg&quot;&gt;“Black Mamba”&lt;/a&gt; Kobe followed by &lt;a href=&quot;http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/lakers/images/press/1213_allstar/ts_010103allstar670.jpg&quot;&gt;“Vino”&lt;/a&gt; Kobe. (These names and eras were inspired by a reddit post I read a while ago)&lt;/p&gt;

&lt;p&gt;First let us take a look at his shooting percentages from different distances during each of these eras.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/kobe/FGPct_ShotZones.png?raw=true&quot; alt=&quot;Kobe fgpct barchart&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Notice Kobe’s drastic improvement in the in the 8-16 ft. range. Anyone who watched Kobe during the second half of his career has seen shots like &lt;a href=&quot;https://68.media.tumblr.com/dfb8b3148d2e327bf306064f835cd569/tumblr_o3zj3nVBtk1s3gys4o1_400.gif&quot;&gt;this one&lt;/a&gt; countless times and it’s exactly this improved mid-range game that became an increasingly important aspect of Kobe’s offensive game and contributed to his continued dominance. 
Also, interestingly enough, we can see Kobe’s percentages in the 24+ ft. range decrease fairly consistently, which seems to go against the popular thought that his 3-pt shooting improved throughout his career.&lt;/p&gt;

&lt;p&gt;Now, how about we look at how often Kobe was shooting from these distances.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/kobe/ShotZones_Pie.png?raw=true&quot; alt=&quot;Kobe shot distance distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;One of the most obvious trends seems to be the decrease in shots from fewer than 8 ft. away. Presumably a large portion of these shots are from driving and attacking the basket, which turns out to be extremely taxing on the body, especially for older players.&lt;/p&gt;

&lt;p&gt;It is also interesting to notice that only Solo Kobe shot more than half of his shots from more than 16 ft. away. Take note that Solo Kobe also happened to be the version of Kobe that scored most prolifically, clocking in at a whopping 35.4 points per game in his ‘05-‘06 season. However, he was also shooting the most shots per game that season than any of his other seasons, so the interpretation is that most of these extra shots he was taking that season and during the Solo Kobe era were from greater distances. This makes sense because generally it takes less energy to pull up for a long range jumper than having to battle a defender for position and take a shot from closer.&lt;/p&gt;

&lt;p&gt;We can confirm some of these trends by looking at the types of shots Kobe was shooting.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/wmoon5/wmoon5.github.io/blob/master/images/kobe/ShotTypes_Pie.png?raw=true&quot; alt=&quot;Kobe shot types distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here we can see more obviously the increase in jump shooting and the decrease in layups and dunks throughout Kobe’s career.&lt;/p&gt;

&lt;p&gt;None of this is very groundbreaking. Basketball fans know that Kobe was an athletic freak and could rise up and put you on a poster on any given night, but what made him special was his ability to work on the other parts of his game that would allow him to continue to be dominant as he got older. Another player that comes to mind who has similarly transformed his game is Vince Carter (who just turned 40 by the way and is still doing stuff like &lt;a href=&quot;http://streamable.com/6ebnr&quot;&gt;this&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;So, for the basketball fans out there. Which Kobe was your favorite Kobe? (My answer: Black Mamba)&lt;/p&gt;</content><author><name>wmmoon</name></author><summary type="html">Those who know me know that I’m a huge basketball fan. And now that my playing days are over, I have transitioned from playing basketball to the even more exciting activity of analyzing basketball data.</summary></entry></feed>